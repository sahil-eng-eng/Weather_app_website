(()=>{const e=document.querySelector("[data-userWeather]"),t=document.querySelector("[data-searchWeather]"),a=(document.querySelector(".weather-container"),document.querySelector(".grant-location-container")),c=document.querySelector("[data-searchForm]"),s=document.querySelector(".loading-container"),n=document.querySelector(".user-info-container");let o=e;const r="d1845658f92b31c64bd94f06f7188c9c";function i(e){e!=o&&(o.classList.remove("current-tab"),o=e,o.classList.add("current-tab"),c.classList.contains("active")?(c.classList.remove("active"),n.classList.remove("active"),d()):(n.classList.remove("active"),a.classList.remove("active"),c.classList.add("active")))}function d(){const e=sessionStorage.getItem("user-coordinates");e?l(JSON.parse(e)):a.classList.add("active")}async function l(e){const{lat:t,lon:c}=e;a.classList.remove("active"),s.classList.add("active");try{const e=await fetch(`https://api.openweathermap.org/data/2.5/weather?lat=${t}&lon=${c}&appid=${r}&units=metric`),a=await e.json();s.classList.remove("active"),n.classList.add("active"),u(a)}catch(e){s.classList.remove("active")}}function u(e){const t=document.querySelector("[data-cityName]"),a=document.querySelector("[data-countryIcon]"),c=document.querySelector("[data-weatherDesc]"),s=document.querySelector("[data-weatherIcon]"),n=document.querySelector("[data-temp]"),o=document.querySelector("[data-windspeed]"),r=document.querySelector("[data-humidity]"),i=document.querySelector("[data-cloudiness]");console.log(e),t.innerText=e?.name,a.src=`https://flagcdn.com/144x108/${e?.sys?.country.toLowerCase()}.png`,c.innerText=e?.weather?.[0]?.description,s.src=`http://openweathermap.org/img/w/${e?.weather?.[0]?.icon}.png`,n.innerText=`${e?.main?.temp} Â°C`,o.innerText=`${e?.wind?.speed} m/s`,r.innerText=`${e?.main?.humidity}%`,i.innerText=`${e?.clouds?.all}%`}function m(e){const t={lat:e.coords.latitude,lon:e.coords.longitude};sessionStorage.setItem("user-coordinates",JSON.stringify(t)),l(t)}o.classList.add("current-tab"),d(),e.addEventListener("click",(()=>{i(e)})),t.addEventListener("click",(()=>{i(t)})),document.querySelector("[data-grantAccess]").addEventListener("click",(function(){navigator.geolocation&&navigator.geolocation.getCurrentPosition(m)}));const v=document.querySelector("[data-searchInput]");c.addEventListener("submit",(e=>{e.preventDefault();let t=v.value;""!==t&&async function(e){s.classList.add("active"),n.classList.remove("active"),a.classList.remove("active");try{const t=await fetch(`https://api.openweathermap.org/data/2.5/weather?q=${e}&appid=${r}&units=metric`),a=await t.json();s.classList.remove("active"),n.classList.add("active"),u(a)}catch(e){}}(t)}))})();